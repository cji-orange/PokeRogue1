<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PokéRouge Clone</title>
    <link rel="stylesheet" href="style.css">
    <!-- Pixel Font Link (Example) -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Pixelify+Sans:wght@400..700&display=swap" rel="stylesheet">
    <!-- Supabase JS Client -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
</head>
<body>
    <div id="game-container">

        <!-- Auth Screen (Initially Visible) -->
        <div id="auth-screen">
            <h1>PokéRouge Adventure</h1>
            <div id="auth-form">
                <h2>Login / Register</h2>
                <input type="email" id="auth-email" placeholder="Email" required>
                <input type="password" id="auth-password" placeholder="Password" required>
                <button id="login-button">Login</button>
                <button id="register-button">Register</button>
                <p id="auth-error" class="error-message" style="display: none;"></p>
            </div>
        </div>

        <!-- Start Screen (Shown after login, if no saved game state for user) -->
        <div id="start-screen" style="display: none;">
            <h2>Welcome! Select your starter:</h2>
             <div id="user-display-start" class="user-info">Logged in as: <span id="user-email-start"></span></div>
             <div id="starter-options">
                 <!-- Starter choices will be populated here -->
                 <!-- Example structure: -->
                 <!-- <div class="starter-choice" data-pokemon-id="pkm001"> -->
                 <!--     <div class="pokemon-sprite sprite-pkm001"></div> -->
                 <!--     <p>Bulbasaur</p> -->
                 <!-- </div> -->
             </div>
        </div>

        <!-- Main Game Area (Shown after starter selected or game loaded) -->
        <div id="main-game" style="display: none;">
            <div id="map-area" class="screen" style="display: none;">
                <h2>Map</h2>
                <div id="user-display-map" style="display: none;">
                    Logged in as: <span id="user-email-map"></span> 
                    <button id="logout-button">Logout</button>
                </div>
                <div id="map-nodes">
                    <!-- Map nodes will be generated here -->
                </div>
                <button id="save-game-button-map" disabled>Save Game</button>
            </div>

            <!-- NEW: Reward Selection Area -->
            <div id="reward-selection-area" class="screen" style="display: none;">
                <h2>Choose Your Reward!</h2>
                <div id="reward-options">
                    <!-- Reward buttons will be generated here -->
                </div>
            </div>

            <div id="battle-area" class="screen" style="display: none;">
                <h2>Battle!</h2>
                <div id="opponent-display">
                    <div class="sprite-container" id="opponent-sprite-container">
                         <div class="pokemon-sprite"></div> <!-- Opponent sprite -->
                    </div>
                    <span id="opponent-name"></span>
                    <div class="hp-bar-container">
                        <div id="opponent-hp-bar" class="hp-bar"></div>
                    </div>
                    <span id="opponent-hp-value"></span>
                </div>
                <div id="player-display">
                     <div class="sprite-container" id="player-sprite-container">
                         <div class="pokemon-sprite"></div> <!-- Player sprite -->
                     </div>
                     <span id="player-name"></span>
                     <div class="hp-bar-container">
                        <div id="player-hp-bar" class="hp-bar"></div>
                    </div>
                     <span id="player-hp-value"></span>
                </div>
                <div id="action-buttons"></div>
                 <div id="battle-log"></div>
            </div>

            <div id="party-display">
                <h2>Your Party</h2>
                <!-- Party member structure -->
                <!-- <div class="party-member"> -->
                <!--      <div class="pokemon-sprite sprite-pkmXYZ"></div> -->
                <!--      <p>Name (Lvl X)</p> -->
                <!--      <p>HP: X / Y</p> -->
                <!--      ... EXP Bar ... -->
                <!-- </div> -->
            </div>

            <!-- Add Inventory Display -->
            <div id="inventory-display" style="display: none;">
                <h2>Inventory</h2>
                <ul id="item-list">
                    <!-- Items will be listed here by JS -->
                </ul>
                <button id="close-inventory-button">Close</button>
            </div>

             <!-- Log area common to map and battle -->
             <div id="log-area">
        </div>

        <!-- Game Over Screen (Initially hidden) -->
        <div id="game-over-screen" style="display: none;">
            <h1>Game Over</h1>
             <div id="user-display-gameover" class="user-info">User: <span id="user-email-gameover"></span></div>
            <p id="final-score">Encounters Cleared: 0</p>
            <button id="restart-button">Play Again (New Run)</button>
            <button id="logout-button-gameover">Logout</button>
        </div>

    </div>

    <script src="script.js"></script>
</body>
</html> 